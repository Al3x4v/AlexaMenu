<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <style>
        body{
            text-align: center;
            background-color: black;
            /* Elimina el fondo aquí */
            /* background-image: url("fondo.png"); */
            background-size: cover;
            background-repeat: no-repeat;
        }
        aside{
            color: #ad533c;
            font-size: 30px;
            font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
            margin-top: -16cm;
        }
    </style>
    <canvas id="canvas" width="1100" height="620"></canvas>
    <aside>Apunta a tu destino.</aside>
    <script>
        window.onload = function() {
            var canvas = document.getElementById('canvas'),
                context = canvas.getContext('2d'),
                pupila = new Image(),
                fondo = new Image();

            // Captura la posición del mouse en el canvas
            var mouse = { x: canvas.width / 2, y: canvas.height / 2 };
            canvas.addEventListener('mousemove', function(e) {
                var rect = canvas.getBoundingClientRect();
                mouse.x = e.clientX - rect.left;
                mouse.y = e.clientY - rect.top;
            });

            // Espera a que ambas imágenes carguen
            var imagesLoaded = 0;
            function checkLoaded() {
                imagesLoaded++;
                if (imagesLoaded === 2) {
                    drawFrame();
                }
            }
            pupila.onload = checkLoaded;
            fondo.onload = checkLoaded;

            function drawFrame () {
                window.requestAnimationFrame(drawFrame);
                context.clearRect(0, 0, canvas.width, canvas.height);

                // Dibuja el fondo fijo en el canvas
                context.drawImage(fondo, 0, 0, canvas.width, canvas.height);

                context.save();
                var x = canvas.width / 2 - 27;
                var y = canvas.height / 2 + 8;
                context.translate(x, y);

                var dx = mouse.x - x;
                var dy = mouse.y - y;
                var radianes = Math.atan2(dy, dx);
                context.rotate(radianes);

                // Dibuja la pupila centrada y escalada
                context.drawImage(pupila, -120, -120, 240, 240);

                context.restore();
            }

            pupila.src = "reloj.png";
            fondo.src = "fondo.png";
        };
    </script>
</body>
</html>
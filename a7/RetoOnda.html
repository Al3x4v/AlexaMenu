<!DOCTYPE html>
<html>
<head>
  <title>Estrella Mario Rebote Onda</title>
  <style>
    body { margin:0; background:#000; overflow:hidden; }
    canvas { display:block; }
  </style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let t = 0;
let x = 100;
let dir = 2;
let angle = 0;
let particles = [];
let starsBG = [];

// redimensionar
function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  generarEstrellas();
}
window.addEventListener("resize", resize);
resize();

// haloooooo, alezxza, aqu√≠ fondo con puntitos cuadrados
function generarEstrellas() {
  starsBG = [];
  for (let i = 0; i < 120; i++) {
    starsBG.push({
      x: Math.floor(Math.random() * canvas.width),
      y: Math.floor(Math.random() * canvas.height),
      size: Math.random() > 0.5 ? 2 : 1
    });
  }
}

function drawBackground() {
  ctx.fillStyle = "black";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "white";
  starsBG.forEach(s => {
    ctx.fillRect(s.x, s.y, s.size, s.size);
  });
}


function drawStar(x, y, r, rotation, scale=1, puntos=10) {
  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(rotation);
  ctx.scale(scale, scale);

  ctx.fillStyle = "yellow";
  ctx.beginPath();
  for (let i = 0; i < puntos * 2; i++) {
    let ang = i * Math.PI / puntos - Math.PI/2;
    let rad = (i % 2 === 0) ? r : r * 0.4;
    let xPos = Math.cos(ang) * rad;
    let yPos = Math.sin(ang) * rad;
    ctx.lineTo(xPos, yPos);
  }
  ctx.closePath();
  ctx.fill();

  // ojitos pixel
  ctx.fillStyle = "black";
  ctx.fillRect(-6, -6, 3, 6);
  ctx.fillRect(3, -6, 3, 6);

  ctx.restore();
}

// partulas
function drawParticles() {
  particles.forEach((p, i) => {
    p.time += 0.05;
    p.y += p.vy;
    p.x += p.vx;

    let fade = 1 - p.time / p.lifetime;
    ctx.fillStyle = `rgba(255,255,100,${fade})`;
    ctx.fillRect(Math.round(p.x), Math.round(p.y), 2, 2);

    if (p.time > p.lifetime) {
      particles.splice(i, 1);
    }
  });
}

function loop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawBackground();

  // movimiento en onda vertical
  let y = canvas.height/2 + Math.sin(t * 0.03) * 60;

  // palpitar
  let scale = 1 + Math.cos(t*0.1) * 0.1;
  drawStar(x, y, 25, angle, scale, 10);

  // chispa random
  if (Math.random() < 0.08) {
    particles.push({
      x: x,
      y: y,
      vx: (Math.random()-0.5) * 2,
      vy: (Math.random()-0.5) * 2,
      time: 0,
      lifetime: 25 + Math.random()*20
    });
  }
  drawParticles();

  // movimiento horizontal con rebote en paredes
  x += dir;
  if (x > canvas.width - 40 || x < 40) dir *= -1;

  t += 1;
  angle += 0.05;

  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
